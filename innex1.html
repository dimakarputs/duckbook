<!DOCTYPE HTML>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <script src="localiz3.js"></script>
  <title>DuckBook</title>
  <link rel="stylesheet" href="glavnay_menu.css">
  <link rel="shortcut icon" href="foto/favicon.ico" type="image/x-icon">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap');
  </style>
</head>

<body>
  <div class="superContainer">
    <!----------------------------------HEADER------------------------------------>
    <header>
      <div class="wrap">
        <a href="Untitled-1.html" class="big_name">DuckBook</a>
        <ul class="menuBlock">
          <li><a href="Magazin.html" data-translate="stores">МАГАЗИНЫ</a></li>
          <li><a href="form.html" data-translate="login">ВОЙТИ</a></li>
          <li class="dropdown">
            <button class="menu-button">
              <img src="foto/profile.png" alt="Profile" class="profile-icon">
            </button>
            <div class="dropdown-content">
              <a href="kabinet.html" data-translate="profile">Профиль</a>
              <a href="izbanoe.html" data-translate="favorites">Избранное</a>
              <a href="cart.html" data-translate="cart">Корзина</a>
              <a href="#" data-translate="orders">Заказы</a>
              <a href="#" data-translate="logout">Выйти</a>
            </div>
          </li>
        </ul>
        <div class="hamburger-menu">
          <input id="menu__toggle" type="checkbox" />
          <label class="menu__btn" for="menu__toggle">
            <span></span>
          </label>
          <ul class="menu__box">
            <li><a class="menu__item" href="Magazin.html" data-translate="stores">МАГАЗИНЫ</a></li>
            <li><a class="menu__item" href="signIN.html" data-translate="login">ВОЙТИ</a></li>
            <li><a class="menu__item" href="form.html" data-translate="profile">Профиль</a></li>
          </ul>
        </div>
        <button onclick="switchLanguage('ru')">RU</button>
        <button onclick="switchLanguage('en')">EN</button>
      </div>
    </header>

    <!----------------------------------НОВИНКИ----------------------------------->
    <div class="nov">
      <div class="items_head">
        <p class="items_name" data-translate="newBooks">Новинки</p>
      </div>
      <div class="row" id="row">
        <script>
          class BookBlock {
            constructor(imgSrc, age, name, author, price) {
              this.imgSrc = imgSrc;
              this.age = age;
              this.name = name;
              this.author = author;
              this.price = price; // Добавляем цену
            }

            createBlock() {
              const block = document.createElement("div");
              block.classList.add("block");

              const img = document.createElement("img");
              img.src = this.imgSrc;
              img.alt = this.name;
              block.appendChild(img);

              const ageP = document.createElement("p");
              ageP.textContent = this.age;
              block.appendChild(ageP);

              const h3 = document.createElement("h3");
              h3.textContent = this.name;
              block.appendChild(h3);

              const authorP = document.createElement("p");
              authorP.textContent = this.author;
              block.appendChild(authorP);

              const priceP = document.createElement("p");
              priceP.textContent = `${this.price} руб.`; // Отображаем цену
              block.appendChild(priceP); // Добавляем цену в блок

              const favoriteButton = document.createElement("button");
              favoriteButton.innerHTML = "&#9733;"; // Звезда
              favoriteButton.classList.add("favorite-button");
              favoriteButton.addEventListener("click", () => {
                this.addToFavorites();
              });
              block.appendChild(favoriteButton);

              const buyButton = document.createElement("button");
              buyButton.textContent = "Добавить в корзину";
              buyButton.classList.add("cart-button");
              buyButton.addEventListener("click", () => {
                addToCart(this.imgSrc, this.age, this.name, this.author, this.price); // Передаем цену в корзину
              });
              block.appendChild(buyButton);

              return block;
            }

            addToFavorites() {
              const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
              const book = { imgSrc: this.imgSrc, age: this.age, name: this.name, author: this.author, price: this.price };

              // Проверяем, есть ли уже такая книга в избранном
              if (!favorites.some((b) => b.name === book.name)) {
                favorites.push(book);
                localStorage.setItem("favorites", JSON.stringify(favorites));
                alert("Книга добавлена в избранное!");
              } else {
                alert("Эта книга уже в избранном!");
              }
            }
          }

          function addToCart(imgSrc, age, name, author, price) {
            // Получаем текущую корзину из localStorage
            const cart = JSON.parse(localStorage.getItem("cart")) || [];

            // Проверяем, есть ли эта книга уже в корзине
            const existingBook = cart.find(item => item.name === name);

            if (existingBook) {
              alert("Эта книга уже в корзине!");
              return;
            }

            // Добавляем книгу в корзину
            cart.push({ imgSrc, age, name, author, price, quantity: 1 });

            // Сохраняем обновлённую корзину в localStorage
            localStorage.setItem("cart", JSON.stringify(cart));

            alert("Книга добавлена в корзину!");
          }

          const rowElement = document.getElementById("row");
          const books = [
            ['foto\\kurok.jpg', '+18', 'Курок', 'Пенелопа Дуглас', 499],
            ['foto\\kn3.png', '+18', 'Бездушный', 'Л.ДЖ.ШЭН', 350],
            ['foto\\kn1.png', '+18', 'Грешник', 'Эмма Скотт', 400],
            ['foto\\kn2.png', '+18', 'Случится чудо', 'Л.ДЖ.Шэн', 450],
            ['foto\\kniga11.png', '+18', 'Желание', 'Трейси Вульф', 550],
            ['foto\\kniga4.png', '+18', 'Тень и искры', 'Дженнифер Арм.', 600],
            ['foto\\kniga5.png', '+18', 'Сгорая до тла', 'Эмма Скотт', 490],
            ['foto\\kniga6.png', '+18', 'Будь моей Брейшо', 'Меган Бренд', 530]
          ];

          books.forEach(([imgSrc, age, name, author, price]) => {
            const book = new BookBlock(imgSrc, age, name, author, price);
            rowElement.appendChild(book.createBlock());
          });
        </script>
      </div>
    </div>

    <!------------------------------------ДОСТАВКА------------------------------->
    <div class="aboutService">
      <div class="items_head">
        <h1 class="items_name" data-translate="delivery">Доставка</h1>
      </div>
      <div class="aboutText">
        <p data-translate="deliveryText">
          DuckBook осуществляет доставку по России через Boxberry, Почту России и Dostavista.
          Международные заказы отправляем почтой и DHL (по всему миру).<br>Заказ собирают и передают на доставку в течение 2 рабочих дней после 
          оформления и оплаты заказа. В дни рассылки предзаказов срок может быть увеличен. Заказы, сделанные в пятницу, мы передаем на отправку в понедельник.
          <br>Доставьте себе удовольствие от прочтения своих любимых книг!
        </p>
      </div>
      <div class="aboutBottom"></div>
    </div>

    <!------------------------------------FOOTER---------------------------------->
    <footer class="full-footer">
      <div class="footer">
        <div class="content">
          <div class="logo-footer">
            <a href="#logo" class="logo-up">
              <img src="foto/duckbook2.png" alt="DuckBook Logo">
            </a>
            <div class="footer-info">
              <div class="soc-media">
                <a class="soc-net" href="https://www.youtube.com/channel/UCXi2IeP2M-Z6Vsi-eNeGxAA"><img src="foto/youtube.png" alt="YouTube"></a>
                <a class="soc-net" href="https://discord.gg/U8QzVpVnDE"><img src="foto/steam.png" alt="Discord"></a>
                <a class="soc-net" href="https://vk.com/public212916411"><img src="foto/vk.png" alt="VK"></a>
                <a class="soc-net" href="https://www.twitch.tv/gi_twich"><img src="foto/twitch.png" alt="Twitch"></a>
                <a class="soc-net" href="https://t.me/+UA9zMUjTAX9jZDg6"><img src="foto/telegram.png" alt="Telegram"></a>
              </div>
              <div class="footer-description">
                <div class="company-info">
                  <p data-translate="stores">Наши магазины
                    <ul>
                      <li data-translate="store-kamenaya">Ст.метро "Каменная горка"</li>
                      <li data-translate="store-pushkinskaya">Ст.метро "Пушкинская"</li>
                      <li data-translate="store-nemiga">Ст.метро "Немига"</li>
                    </ul>
                  </p>
                </div>
                <div class="contacts">
                  <p>+375482344565</p>
                  <p>DuckBook@gmail.com</p>
                  <p>DuckBook</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- Сценарий для выхода из аккаунта -->
  <script src="localiz.js"></script>
</body>
</html>
